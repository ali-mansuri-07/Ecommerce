{"version":3,"file":"static/js/976.e2ac98d9.chunk.js","mappings":"+PASQA,EAASC,EAAAA,EAAAA,KAkFjB,IAhFoB,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACrB,GAA8BC,EAAAA,EAAAA,UAAS,gBAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KAGA,GAAuBC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAC9CC,GADN,EAAQC,KAAR,EAAcC,MACGC,EAAAA,EAAAA,OAqCTC,EAA4CV,EAA5CU,OAAQC,EAAoCX,EAApCW,MAAOC,EAA6BZ,EAA7BY,YAAaC,EAAgBb,EAAhBa,KAAMC,EAAUd,EAAVc,MAC1C,OACE,gCACGd,GAAWA,EAAQe,SAAWf,EAAQe,QAAQC,OAAS,GACtDC,EAAAA,EAAAA,GAAYjB,IAEZ,gBAAKkB,UAAU,wBAAf,4BAGF,SAAC,IAAD,CACEC,OACE,gBACEC,IAAKV,GAAUA,EAAOM,OAASN,EAAO,GAAGW,IAAMC,EAC/CC,MAAO,CAAEC,OAAQ,QAASC,UAAW,SACrCP,UAAU,QAGdQ,QAAS,EACP,UAAC,KAAD,CAAMC,GAAE,mBAAcd,GAAtB,WACE,SAAC,IAAD,CAAaK,UAAU,iBADzB,KAC2C,kBAD3C,oBAGA,SAAC,IAAD,CAASP,MAAOT,EAAhB,UACE,eAAG0B,QAzDW,WAEtB,IAAIpB,EAAO,GACX,GAAsB,qBAAXqB,OAAwB,CAE7BC,aAAaC,QAAQ,UACvBvB,EAAOwB,KAAKC,MAAMH,aAAaC,QAAQ,UAGzCvB,EAAK0B,MAAL,kBACKlC,GADL,IAEEmC,MAAO,KAGT,IAAIC,EAASC,IAAAA,SAAW7B,EAAM6B,IAAAA,SAG9BP,aAAaQ,QAAQ,OAAQN,KAAKO,UAAUH,IAE5CjC,EAAW,SAGXG,EAAS,CACPkC,KAAM,cACNC,QAASL,IAGX9B,EAAS,CACPkC,KAAM,cACNC,SAAS,MA4BwBC,SAAU1C,EAAQ2C,SAAW,EAA1D,WACE,SAAC,IAAD,CAAsBzB,UAAU,gBADlC,KACmD,kBAChDlB,EAAQ2C,SAAW,EAAI,eAAiB,oBAfjD,UAoBE,SAAC7C,EAAD,CACEa,MAAK,UAAKA,EAAL,eAAiBG,GACtBF,YAAW,UAAKA,GAAeA,EAAYgC,UAAU,EAAG,IAA7C,gB,6TClFRC,EAAa,yCAAG,WAAO7C,EAAS8C,GAAhB,sFACrBC,IAAAA,KAAA,UAAcC,4BAAd,YAAmDhD,EAAS,CAChEiD,QAAS,CACPH,UAAAA,KAHuB,mFAAH,wDAObI,EAAkB,yCAAG,WAAOf,GAAP,sFAC1BY,IAAAA,IAAA,UAAaC,4BAAb,qBAAmDb,IADzB,mFAAH,sDAGlBgB,EAAa,yCAAG,WAAOtC,EAAMiC,GAAb,sFACrBC,IAAAA,OAAA,UAAgBC,4BAAhB,oBAAqDnC,GAAQ,CACjEoC,QAAS,CACPH,UAAAA,KAHuB,mFAAH,wDAObM,EAAU,yCAAG,WAAOvC,GAAP,sFAClBkC,IAAAA,IAAA,UAAaC,4BAAb,oBAAkDnC,IADhC,mFAAH,sDAGVwC,EAAa,yCAAG,WAAOxC,EAAMb,EAAS8C,GAAtB,sFACrBC,IAAAA,IAAA,UAAaC,4BAAb,oBAAkDnC,GAAQb,EAAS,CACvEiD,QAAS,CACPH,UAAAA,KAHuB,mFAAH,0DAObQ,EAAW,yCAAG,WAAOC,EAAMC,EAAOC,GAApB,sFACnBV,IAAAA,KAAA,UAAcC,4BAAd,aAAoD,CACxDO,KAAAA,EACAC,MAAAA,EACAC,KAAAA,IAJuB,mFAAH,0DAOXC,EAAgB,yCAAG,mGACxBX,IAAAA,IAAA,UAAaC,4BAAb,oBADwB,mFAAH,qDAGhBW,EAAW,yCAAG,WAAOC,EAAWC,EAAMf,GAAxB,sFACnBC,IAAAA,IAAA,UACDC,4BADC,yBACyCY,GAC7C,CAAEC,KAAAA,GACF,CACEZ,QAAS,CACPH,UAAAA,KANmB,mFAAH,0DAWXgB,EAAU,yCAAG,WAAOF,GAAP,sFAClBb,IAAAA,IAAA,UAAaC,4BAAb,4BAA0DY,IADxC,mFAAH,sDAGVG,EAAqB,yCAAG,WAAOC,GAAP,sFAC7BjB,IAAAA,KAAA,UAAcC,4BAAd,mBAA0DgB,GAD7B,mFAAH,uD,yFClDrB/C,EAAc,SAACgD,GAC1B,GAAIA,GAAKA,EAAElD,QAAS,CAClB,IAAImD,EAAeD,GAAKA,EAAElD,QACtBoD,EAAQ,GACRnD,EAASkD,EAAalD,OAG1BkD,EAAaE,KAAI,SAACC,GAAD,OAAOF,EAAMjC,KAAKmC,EAAER,SACrC,IAAIS,EAAeH,EAAMI,QAAO,SAACN,EAAGO,GAAJ,OAAUP,EAAIO,IAAG,GAM7CC,EAAyB,EAAfH,GAHS,EAATtD,GAMd,OACE,gBAAKE,UAAU,wBAAf,UACE,2BACE,SAAC,IAAD,CACEwD,cAAc,OACdC,YAAY,MACZC,eAAe,MACfC,OAAQJ,EACRK,SAAS,W,qVC1BRC,EAAQ,yCAAG,WAAOvE,EAAMsC,GAAb,sFAChBC,IAAAA,KAAA,UACDC,4BADC,cAEJ,CAAExC,KAAAA,GACF,CACEyC,QAAS,CACPH,UAAAA,KANgB,mFAAH,wDAWRkC,EAAW,yCAAG,WAAOlC,GAAP,sFACnBC,IAAAA,IAAA,UAAaC,4BAAb,cAAoD,CACxDC,QAAS,CACPH,UAAAA,KAHqB,mFAAH,sDAOXmC,EAAa,yCAAG,WAAOnC,GAAP,sFACrBC,IAAAA,OAAA,UAAgBC,4BAAhB,cAAuD,CAC3DC,QAAS,CACPH,UAAAA,KAHuB,mFAAH,sDAOboC,EAAe,yCAAG,WAAOpC,EAAWqC,GAAlB,sFACvBpC,IAAAA,KAAA,UACDC,4BADC,iBAEJ,CAAEmC,QAAAA,GACF,CACElC,QAAS,CACPH,UAAAA,KANuB,mFAAH,wDAWfsC,EAAW,yCAAG,WAAOtC,EAAWuC,GAAlB,sFACnBtC,IAAAA,KAAA,UACDC,4BADC,qBAEJ,CAAEqC,OAAAA,GACF,CACEpC,QAAS,CACPH,UAAAA,KANmB,mFAAH,wDAWXwC,EAAW,yCAAG,WAAOC,EAAgBzC,GAAvB,sFACnBC,IAAAA,KAAA,UACDC,4BADC,eAEJ,CAAEuC,eAAAA,GACF,CACEtC,QAAS,CACPH,UAAAA,KANmB,mFAAH,wDAWX0C,EAAa,yCAAG,WAAO1C,GAAP,sFACrBC,IAAAA,IAAA,UAAaC,4BAAb,gBAAsD,CAC1DC,QAAS,CACPH,UAAAA,KAHuB,mFAAH,sDAOb2C,EAAW,yCAAG,WAAO3C,GAAP,sFACnBC,IAAAA,IAAA,UAAaC,4BAAb,kBAAwD,CAC5DC,QAAS,CACPH,UAAAA,KAHqB,mFAAH,sDAOX4C,EAAc,yCAAG,WAAO9B,EAAWd,GAAlB,sFACtBC,IAAAA,IAAA,UACDC,4BADC,0BAC0CY,GAC9C,GACA,CACEX,QAAS,CACPH,UAAAA,KANsB,mFAAH,wDAWd6C,EAAa,yCAAG,WAAO/B,EAAWd,GAAlB,sFACrBC,IAAAA,KAAA,UACDC,4BADC,kBAEJ,CAAEY,UAAAA,GACF,CACEX,QAAS,CACPH,UAAAA,KANqB,mFAAH,wDAWb8C,EAAsB,yCAAG,WACpC9C,EACA+C,EACAC,GAHoC,sFAK9B/C,IAAAA,KAAA,UACDC,4BADC,oBAEJ,CAAE+C,cAAeD,EAAmBD,IAAAA,GACpC,CACE5C,QAAS,CACPH,UAAAA,KAV8B,mFAAH,2D,gOCPnC,EAtFyB,SAAC,GAAiB,IAAf9C,EAAc,EAAdA,QAExBc,EAQEd,EARFc,MACAkF,EAOEhG,EAPFgG,SACAC,EAMEjG,EANFiG,KACAC,EAKElG,EALFkG,SACAC,EAIEnG,EAJFmG,MACAC,EAGEpG,EAHFoG,MACAzD,EAEE3C,EAFF2C,SACA0D,EACErG,EADFqG,KAGF,OACE,gBAAInF,UAAU,aAAd,WACE,gBAAIA,UAAU,kBAAd,kBACQ,KACN,kBAAMA,UAAU,+CAAhB,eACKJ,QAINkF,IACC,gBAAI9E,UAAU,kBAAd,qBACW,KACT,SAAC,KAAD,CACES,GAAE,oBAAeqE,EAASnF,MAC1BK,UAAU,+CAFZ,SAIG8E,EAASM,UAKfL,IACC,gBAAI/E,UAAU,kBAAd,2BAEG+E,EAAK7B,KAAI,SAACmC,GAAD,OACR,SAAC,KAAD,CAEE5E,GAAE,eAAU4E,EAAE1F,MACdK,UAAU,+CAHZ,SAKGqF,EAAED,MAJEC,EAAEC,YAUf,gBAAItF,UAAU,kBAAd,qBACW,KACT,iBAAMA,UAAU,+CAAhB,SACGgF,QAIL,gBAAIhF,UAAU,kBAAd,kBACQ,KACN,iBAAMA,UAAU,+CAAhB,SACGiF,QAIL,gBAAIjF,UAAU,kBAAd,kBACQ,KACN,iBAAMA,UAAU,+CAAhB,SACGkF,QAIL,gBAAIlF,UAAU,kBAAd,sBACY,KACV,iBAAMA,UAAU,+CAAhB,SACGyB,QAIL,gBAAIzB,UAAU,kBAAd,iBACO,KACL,iBAAMA,UAAU,+CAAhB,SACGmF,W,iECnCX,EAxCoB,SAAC,GAAkB,IAAhBI,EAAe,EAAfA,SACblG,GAASH,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAAtCE,KACR,GAAwCN,EAAAA,EAAAA,WAAS,GAAjD,eAAOyG,EAAP,KAAqBC,EAArB,KAEIC,GAAUC,EAAAA,EAAAA,MACRhG,GAASiG,EAAAA,EAAAA,MAATjG,KAaN,OACE,iCACE,iBAAKe,QAbW,WACdrB,GAAQA,EAAKwG,MACfJ,GAAgB,GAEhBC,EAAQ1E,KAAK,CACX8E,SAAU,SACV3G,MAAO,CAAE4G,KAAK,YAAD,OAAcpG,OAO7B,WACE,SAACqG,EAAA,EAAD,CAAchG,UAAU,gBAD1B,KAC2C,kBAAO,IAC/CX,EAAO,eAAiB,4BAE3B,SAAC,IAAD,CACEI,MAAM,oBACNwG,UAAQ,EACRC,QAASV,EACTW,KAAM,WACJV,GAAgB,GAChBW,EAAAA,GAAAA,QAAc,+CAEhBC,SAAU,kBAAMZ,GAAgB,IARlC,SAUGF,Q,wCCxBDe,EAAYC,EAAAA,EAAAA,QAsHpB,EAnHsB,SAAC,GAAoC,IAAlCzH,EAAiC,EAAjCA,QAAS0H,EAAwB,EAAxBA,YAAa7D,EAAW,EAAXA,KAC7C,GAA8B5D,EAAAA,EAAAA,UAAS,gBAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KAGA,GAAuBC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAA5CE,EAAR,EAAQA,KACFD,GADN,EAAcE,MACGC,EAAAA,EAAAA,OAEbmG,GAAUC,EAAAA,EAAAA,MAENlG,EAAoCX,EAApCW,MAAOD,EAA6BV,EAA7BU,OAAQE,EAAqBZ,EAArBY,YAAa4F,EAAQxG,EAARwG,IA6CpC,OACE,iCACE,iBAAKtF,UAAU,WAAf,UACGR,GAAUA,EAAOM,QAChB,SAAC,KAAD,CAAU2G,YAAY,EAAMC,UAAQ,EAACC,cAAY,EAAjD,SACGnH,GAAUA,EAAO0D,KAAI,SAAC0D,GAAD,OAAO,gBAAK1G,IAAK0G,EAAEzG,KAAUyG,EAAEC,iBAGvD,SAAC,IAAD,CAAM5G,OAAO,gBAAKC,IAAK4G,EAAQ9G,UAAU,uBAG3C,UAAC,IAAD,CAAMsB,KAAK,OAAX,WACE,SAACgF,EAAD,CAASS,IAAI,cAAb,SACGrH,GAAeA,GADa,MAG/B,SAAC4G,EAAD,CAASS,IAAI,OAAb,uEAAwB,YAM5B,iBAAK/G,UAAU,WAAf,WACE,eAAIA,UAAU,cAAd,SAA6BP,IAE5BX,GAAWA,EAAQe,SAAWf,EAAQe,QAAQC,OAAS,GACtDC,EAAAA,EAAAA,GAAYjB,IAEZ,gBAAKkB,UAAU,wBAAf,4BAGF,SAAC,IAAD,CACEQ,QAAS,EACP,SAAC,IAAD,CAASwG,UAAU,MAAMvH,MAAOT,EAAhC,UACE,eAAG0B,QA5ES,WAEtB,IAAIpB,EAAO,GACX,GAAsB,qBAAXqB,OAAwB,CAE7BC,aAAaC,QAAQ,UACvBvB,EAAOwB,KAAKC,MAAMH,aAAaC,QAAQ,UAGzCvB,EAAK0B,MAAL,kBACKlC,GADL,IAEEmC,MAAO,KAGT,IAAIC,EAASC,IAAAA,SAAW7B,EAAM6B,IAAAA,SAG9BP,aAAaQ,QAAQ,OAAQN,KAAKO,UAAUH,IAE5CjC,EAAW,SAGXG,EAAS,CACPkC,KAAM,cACNC,QAASL,IAGX9B,EAAS,CACPkC,KAAM,cACNC,SAAS,MA+C0BC,SAAU1C,EAAQ2C,SAAW,EAA1D,WACE,SAACwF,EAAA,EAAD,CAAsBjH,UAAU,iBAChC,kBACClB,EAAQ2C,SAAW,EAAI,eAAiB,oBAG7C,eAAGf,QAhDe,SAACwG,GAC3BA,EAAEC,kBACF1C,EAAAA,EAAAA,IAAc3F,EAAQwG,IAAKjG,EAAKwG,OAAOuB,MAAK,SAACC,GAC3CC,QAAQC,IAAI,oBAAqBF,EAAIG,MACrCpB,EAAAA,GAAAA,QAAc,qBACdV,EAAQ1E,KAAK,sBA2CP,WACE,SAACyG,EAAA,EAAD,CAAezH,UAAU,cAD3B,KAC0C,kBAD1C,uBAGA,SAAC,EAAD,WACE,SAAC,IAAD,CACEoF,KAAME,EACNoC,cAAe,EACf/D,OAAQhB,EACRgF,aAAcnB,EACdoB,cAAc,EACdlE,eAAe,WAnBvB,UAwBE,SAAC,EAAD,CAAkB5E,QAASA,a,WCjDrC,EAxEgB,SAAC,GAAe,IAAb+I,EAAY,EAAZA,MACjB,GAA8B9I,EAAAA,EAAAA,UAAS,IAAvC,eAAOD,EAAP,KAAgBgJ,EAAhB,KACA,GAA8B/I,EAAAA,EAAAA,UAAS,IAAvC,eAAOgJ,EAAP,KAAgBC,EAAhB,KACA,GAAwBjJ,EAAAA,EAAAA,UAAS,GAAjC,eAAO4D,EAAP,KAAasF,EAAb,KAEQ5I,GAASH,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAAtCE,KAEAM,EAASkI,EAAMK,OAAfvI,MAERwI,EAAAA,EAAAA,YAAU,WACRC,MACC,CAACzI,KAEJwI,EAAAA,EAAAA,YAAU,WACR,GAAIrJ,EAAQe,SAAWR,EAAM,CAC3B,IAAIgJ,EAAuBvJ,EAAQe,QAAQyI,MACzC,SAACC,GAAD,OAASA,EAAIC,SAASC,aAAepJ,EAAKiG,IAAImD,cAEhDJ,GAAwBJ,EAAQI,EAAqB1F,UAIzD,IAAMyF,EAAoB,YACxBlG,EAAAA,EAAAA,IAAWvC,GAAMyH,MAAK,SAACC,GACrBS,EAAWT,EAAIG,OAEf5E,EAAAA,EAAAA,IAAWyE,EAAIG,KAAKlC,KAAK8B,MAAK,SAACC,GAAD,OAASW,EAAWX,EAAIG,aAa1D,OACE,iBAAKxH,UAAU,kBAAf,WACE,gBAAKA,UAAU,WAAf,UACE,SAAC,EAAD,CACElB,QAASA,EACT0H,YAdY,SAACkC,EAAWtD,GAC9B6C,EAAQS,GACRpB,QAAQqB,MAAMD,EAAWtD,IACzB3C,EAAAA,EAAAA,IAAY2C,EAAMsD,EAAWrJ,EAAKwG,OAAOuB,MAAK,SAACC,GAC7CC,QAAQC,IAAI,iBAAkBF,EAAIG,MAClCY,QAUIzF,KAAMA,OAIV,gBAAK3C,UAAU,MAAf,UACE,iBAAKA,UAAU,4BAAf,WACE,mBACA,8CACA,wBAIJ,gBAAKA,UAAU,WAAf,SACG+H,EAAQjI,OACPiI,EAAQ7E,KAAI,SAACC,GAAD,OACV,gBAAiBnD,UAAU,WAA3B,UACE,SAAC4I,EAAA,EAAD,CAAa9J,QAASqE,KADdA,EAAEmC,SAKd,gBAAKtF,UAAU,kBAAf,sC","sources":["components/cards/ProductCard.js","functions/product.js","functions/rating.js","functions/user.js","components/cards/ProductListItems.js","components/modal/RatingModal.js","components/cards/SingleProduct.js","pages/Product.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Card, Tooltip } from \"antd\";\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport laptop from \"../../images/laptop.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { showAverage } from \"../../functions/rating\";\r\nimport _ from \"lodash\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nconst { Meta } = Card;\r\n\r\nconst ProductCard = ({ product }) => {\r\n  const [tooltip, setTooltip] = useState(\"Click to add\");\r\n\r\n  // redux\r\n  const { user, cart } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n\r\n  const handleAddToCart = () => {\r\n    // create cart array\r\n    let cart = [];\r\n    if (typeof window !== \"undefined\") {\r\n      // if cart is in local storage GET it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      // push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n      // remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n      // save to local storage\r\n      // console.log('unique', unique)\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n      // show tooltip\r\n      setTooltip(\"Added\");\r\n\r\n      // add to reeux state\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n      // show cart items in side drawer\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  // destructure\r\n  const { images, title, description, slug, price } = product;\r\n  return (\r\n    <>\r\n      {product && product.ratings && product.ratings.length > 0 ? (\r\n        showAverage(product)\r\n      ) : (\r\n        <div className=\"text-center pt-1 pb-3\">No rating yet</div>\r\n      )}\r\n\r\n      <Card\r\n        cover={\r\n          <img\r\n            src={images && images.length ? images[0].url : laptop}\r\n            style={{ height: \"150px\", objectFit: \"cover\" }}\r\n            className=\"p-1\"\r\n          />\r\n        }\r\n        actions={[\r\n          <Link to={`/product/${slug}`}>\r\n            <EyeOutlined className=\"text-warning\" /> <br /> View Product\r\n          </Link>,\r\n          <Tooltip title={tooltip}>\r\n            <a onClick={handleAddToCart} disabled={product.quantity < 1}>\r\n              <ShoppingCartOutlined className=\"text-danger\" /> <br />\r\n              {product.quantity < 1 ? \"Out of stock\" : \"Add to Cart\"}\r\n            </a>\r\n          </Tooltip>,\r\n        ]}\r\n      >\r\n        <Meta\r\n          title={`${title} - $${price}`}\r\n          description={`${description && description.substring(0, 40)}...`}\r\n        />\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/product`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProduct = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\nexport const updateProduct = async (slug, product, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProducts = async (sort, order, page) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/products`, {\r\n    sort,\r\n    order,\r\n    page,\r\n  });\r\n\r\nexport const getProductsCount = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`,\r\n    { star },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getRelated = async (productId) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\nexport const fetchProductsByFilter = async (arg) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg);\r\n","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nexport const showAverage = (p) => {\r\n  if (p && p.ratings) {\r\n    let ratingsArray = p && p.ratings;\r\n    let total = [];\r\n    let length = ratingsArray.length;\r\n    // console.log(\"length\", length);\r\n\r\n    ratingsArray.map((r) => total.push(r.star));\r\n    let totalReduced = total.reduce((p, n) => p + n, 0);\r\n    // console.log(\"totalReduced\", totalReduced);\r\n\r\n    let highest = length * 5;\r\n    // console.log(\"highest\", highest);\r\n\r\n    let result = (totalReduced * 5) / highest;\r\n    // console.log(\"result\", result);\r\n\r\n    return (\r\n      <div className=\"text-center pt-1 pb-3\">\r\n        <span>\r\n          <StarRating\r\n            starDimension=\"20px\"\r\n            starSpacing=\"2px\"\r\n            starRatedColor=\"red\"\r\n            rating={result}\r\n            editing={false}\r\n          />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import axios from \"axios\";\r\n\r\nexport const userCart = async (cart, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cart`,\r\n    { cart },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getUserCart = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const emptyUserCart = async (authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const saveUserAddress = async (authtoken, address) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/address`,\r\n    { address },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const applyCoupon = async (authtoken, coupon) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\r\n    { coupon },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const createOrder = async (stripeResponse, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/order`,\r\n    { stripeResponse },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getUserOrders = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getWishlist = async (authtoken) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const removeWishlist = async (productId, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\r\n    {},\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const addToWishlist = async (productId, authtoken) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/wishlist`,\r\n    { productId },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const createCashOrderForUser = async (\r\n  authtoken,\r\n  COD,\r\n  couponTrueOrFalse\r\n) =>\r\n  await axios.post(\r\n    `${process.env.REACT_APP_API}/user/cash-order`,\r\n    { couponApplied: couponTrueOrFalse, COD },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ProductListItems = ({ product }) => {\r\n  const {\r\n    price,\r\n    category,\r\n    subs,\r\n    shipping,\r\n    color,\r\n    brand,\r\n    quantity,\r\n    sold,\r\n  } = product;\r\n\r\n  return (\r\n    <ul className=\"list-group\">\r\n      <li className=\"list-group-item\">\r\n        Price{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          $ {price}\r\n        </span>\r\n      </li>\r\n\r\n      {category && (\r\n        <li className=\"list-group-item\">\r\n          Category{\" \"}\r\n          <Link\r\n            to={`/category/${category.slug}`}\r\n            className=\"label label-default label-pill pull-xs-right\"\r\n          >\r\n            {category.name}\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {subs && (\r\n        <li className=\"list-group-item\">\r\n          Sub Categories\r\n          {subs.map((s) => (\r\n            <Link\r\n              key={s._id}\r\n              to={`/sub/${s.slug}`}\r\n              className=\"label label-default label-pill pull-xs-right\"\r\n            >\r\n              {s.name}\r\n            </Link>\r\n          ))}\r\n        </li>\r\n      )}\r\n\r\n      <li className=\"list-group-item\">\r\n        Shipping{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {shipping}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Color{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {color}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Brand{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {brand}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Available{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {quantity}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Sold{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {sold}\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ProductListItems;\r\n","import React, { useState } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { StarOutlined } from \"@ant-design/icons\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst RatingModal = ({ children }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n\r\n  let history = useHistory();\r\n  let { slug } = useParams();\r\n\r\n  const handleModal = () => {\r\n    if (user && user.token) {\r\n      setModalVisible(true);\r\n    } else {\r\n      history.push({\r\n        pathname: \"/login\",\r\n        state: { from: `/product/${slug}` },\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div onClick={handleModal}>\r\n        <StarOutlined className=\"text-danger\" /> <br />{\" \"}\r\n        {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n      </div>\r\n      <Modal\r\n        title=\"Leave your rating\"\r\n        centered\r\n        visible={modalVisible}\r\n        onOk={() => {\r\n          setModalVisible(false);\r\n          toast.success(\"Thanks for your review. It will apper soon\");\r\n        }}\r\n        onCancel={() => setModalVisible(false)}\r\n      >\r\n        {children}\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RatingModal;\r\n","import React, { useState } from \"react\";\r\nimport { Card, Tabs, Tooltip } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport Laptop from \"../../images/laptop.png\";\r\nimport ProductListItems from \"./ProductListItems\";\r\nimport StarRating from \"react-star-ratings\";\r\nimport RatingModal from \"../modal/RatingModal\";\r\nimport { showAverage } from \"../../functions/rating\";\r\nimport _ from \"lodash\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addToWishlist } from \"../../functions/user\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\n// this is childrend component of Product page\r\nconst SingleProduct = ({ product, onStarClick, star }) => {\r\n  const [tooltip, setTooltip] = useState(\"Click to add\");\r\n\r\n  // redux\r\n  const { user, cart } = useSelector((state) => ({ ...state }));\r\n  const dispatch = useDispatch();\r\n  // router\r\n  let history = useHistory();\r\n\r\n  const { title, images, description, _id } = product;\r\n\r\n  const handleAddToCart = () => {\r\n    // create cart array\r\n    let cart = [];\r\n    if (typeof window !== \"undefined\") {\r\n      // if cart is in local storage GET it\r\n      if (localStorage.getItem(\"cart\")) {\r\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n      }\r\n      // push new product to cart\r\n      cart.push({\r\n        ...product,\r\n        count: 1,\r\n      });\r\n      // remove duplicates\r\n      let unique = _.uniqWith(cart, _.isEqual);\r\n      // save to local storage\r\n      // console.log('unique', unique)\r\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\r\n      // show tooltip\r\n      setTooltip(\"Added\");\r\n\r\n      // add to redux state\r\n      dispatch({\r\n        type: \"ADD_TO_CART\",\r\n        payload: unique,\r\n      });\r\n      // show cart items in side drawer\r\n      dispatch({\r\n        type: \"SET_VISIBLE\",\r\n        payload: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddToWishlist = (e) => {\r\n    e.preventDefault();\r\n    addToWishlist(product._id, user.token).then((res) => {\r\n      console.log(\"ADDED TO WISHLIST\", res.data);\r\n      toast.success(\"Added to wishlist\");\r\n      history.push(\"/user/wishlist\");\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"col-md-7\">\r\n        {images && images.length ? (\r\n          <Carousel showArrows={true} autoPlay infiniteLoop>\r\n            {images && images.map((i) => <img src={i.url} key={i.public_id} />)}\r\n          </Carousel>\r\n        ) : (\r\n          <Card cover={<img src={Laptop} className=\"mb-3 card-image\" />}></Card>\r\n        )}\r\n\r\n        <Tabs type=\"card\">\r\n          <TabPane tab=\"Description\" key=\"1\">\r\n            {description && description}\r\n          </TabPane>\r\n          <TabPane tab=\"More\" key=\"2\">\r\n            Call use on xxxx xxx xxx to learn more about this product.\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <div className=\"col-md-5\">\r\n        <h1 className=\"bg-info p-3\">{title}</h1>\r\n\r\n        {product && product.ratings && product.ratings.length > 0 ? (\r\n          showAverage(product)\r\n        ) : (\r\n          <div className=\"text-center pt-1 pb-3\">No rating yet</div>\r\n        )}\r\n\r\n        <Card\r\n          actions={[\r\n            <Tooltip placement=\"top\" title={tooltip}>\r\n              <a onClick={handleAddToCart} disabled={product.quantity < 1}>\r\n                <ShoppingCartOutlined className=\"text-danger\" />\r\n                <br />\r\n                {product.quantity < 1 ? \"Out of Stock\" : \"Add To Cart\"}\r\n              </a>\r\n            </Tooltip>,\r\n            <a onClick={handleAddToWishlist}>\r\n              <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\r\n            </a>,\r\n            <RatingModal>\r\n              <StarRating\r\n                name={_id}\r\n                numberOfStars={5}\r\n                rating={star}\r\n                changeRating={onStarClick}\r\n                isSelectable={true}\r\n                starRatedColor=\"red\"\r\n              />\r\n            </RatingModal>,\r\n          ]}\r\n        >\r\n          <ProductListItems product={product} />\r\n        </Card>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleProduct;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { getProduct, productStar } from \"../functions/product\";\r\nimport SingleProduct from \"../components/cards/SingleProduct\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getRelated } from \"../functions/product\";\r\nimport ProductCard from \"../components/cards/ProductCard\";\r\n\r\nconst Product = ({ match }) => {\r\n  const [product, setProduct] = useState({});\r\n  const [related, setRelated] = useState([]);\r\n  const [star, setStar] = useState(0);\r\n  // redux\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    loadSingleProduct();\r\n  }, [slug]);\r\n\r\n  useEffect(() => {\r\n    if (product.ratings && user) {\r\n      let existingRatingObject = product.ratings.find(\r\n        (ele) => ele.postedBy.toString() === user._id.toString()\r\n      );\r\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\r\n    }\r\n  });\r\n\r\n  const loadSingleProduct = () => {\r\n    getProduct(slug).then((res) => {\r\n      setProduct(res.data);\r\n      // load related\r\n      getRelated(res.data._id).then((res) => setRelated(res.data));\r\n    });\r\n  };\r\n\r\n  const onStarClick = (newRating, name) => {\r\n    setStar(newRating);\r\n    console.table(newRating, name);\r\n    productStar(name, newRating, user.token).then((res) => {\r\n      console.log(\"rating clicked\", res.data);\r\n      loadSingleProduct(); // if you want to show updated rating in real time\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row pt-4\">\r\n        <SingleProduct\r\n          product={product}\r\n          onStarClick={onStarClick}\r\n          star={star}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col text-center pt-5 pb-5\">\r\n          <hr />\r\n          <h4>Related Products</h4>\r\n          <hr />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row pb-5\">\r\n        {related.length ? (\r\n          related.map((r) => (\r\n            <div key={r._id} className=\"col-md-4\">\r\n              <ProductCard product={r} />\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center col\">No Products Found</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"],"names":["Meta","Card","product","useState","tooltip","setTooltip","useSelector","state","dispatch","user","cart","useDispatch","images","title","description","slug","price","ratings","length","showAverage","className","cover","src","url","laptop","style","height","objectFit","actions","to","onClick","window","localStorage","getItem","JSON","parse","push","count","unique","_","setItem","stringify","type","payload","disabled","quantity","substring","createProduct","authtoken","axios","process","headers","getProductsByCount","removeProduct","getProduct","updateProduct","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","p","ratingsArray","total","map","r","totalReduced","reduce","n","result","starDimension","starSpacing","starRatedColor","rating","editing","userCart","getUserCart","emptyUserCart","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","addToWishlist","createCashOrderForUser","COD","couponTrueOrFalse","couponApplied","category","subs","shipping","color","brand","sold","name","s","_id","children","modalVisible","setModalVisible","history","useHistory","useParams","token","pathname","from","StarOutlined","centered","visible","onOk","toast","onCancel","TabPane","Tabs","onStarClick","showArrows","autoPlay","infiniteLoop","i","public_id","Laptop","tab","placement","ShoppingCartOutlined","e","preventDefault","then","res","console","log","data","HeartOutlined","numberOfStars","changeRating","isSelectable","match","setProduct","related","setRelated","setStar","params","useEffect","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","newRating","table","ProductCard"],"sourceRoot":""}